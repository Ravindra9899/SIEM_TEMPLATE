<app-content>
    <ng-container class="inner-dynamic-content">
        <div class="config-content">
            <div style="text-align: center;font-weight: bold; font-size: large; margin: 2vh 0 2vh 0;">
                Configuration Page
            </div>
            <div class="config-content-child">
                <table>
                    <tr>
                        <th>S. No.</th>
                        <th>API Name</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                    <tr *ngFor="let api of getAvailableApis()">
                        <td>
                            {{ getAvailableApis().indexOf(api) + 1 }}
                        </td>
                        <td>
                            {{ api["API_Name"] }}
                        </td>
                        <td
                            [ngStyle]="{'color': api['status'] === 'Active' ? 'green' : api['status'] === 'Disabled' ? 'red' : 'yellow'}">
                            {{ api["status"] }}</td>
                        <td>
                            <i class="fa fa-eye" matTooltip="View" aria-hidden="true"
                                (click)="onApiView(getAvailableApis().indexOf(api))"
                                *ngIf="showScannerView(api)"
                                >
                            </i>
                            <i class="fa fa-edit" matTooltip="Edit" aria-hidden="true"
                                (click)="onApiEdit(getAvailableApis().indexOf(api))"
                                *ngIf="showScannerEdit(api)"
                                >
                            </i>
                            <i class="fa fa-circle" matTooltip="Edit" aria-hidden="true"
                            style="color: #222736;"
                                *ngIf="!showScannerEdit(api)"
                                >
                            </i>
                            <i class="fa"
                                [ngClass]="{'fa-ban': api['status']=='Active', 'fa-check': api['status']=='Inactive'}"
                                [matTooltip]="api['status']=='Active'? 'Disable':'Activate'" aria-hidden="true"
                                (click)="onApiDisable(getAvailableApis().indexOf(api))">
                            </i>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </ng-container>
    <ng-container class="inner-dynamic-content-2" *ngIf="this.showEditor">
        <div class="config-content-2">
            <h3 style="text-align: center;"> {{ this.getAvailableApis()[this.currentIdOfApi]['API_Name'] }} </h3>
            <form *ngIf="getAvailableApis()[currentIdOfApi]['API_Name']=='Virus Total'"
                [formGroup]="forms['Virus Total']">
                Current API Key: <b>{{ this.getAvailableApis()[currentIdOfApi]['config']['api_key'] }}</b>
                <br>
                <input type="text" formControlName="newApiKey" placeholder="Enter new API Key">
                <br>
                <button class="config-update-button" (click)="onApiConfigUpdateClick('Virus Total')">Submit</button>
                <br>
            </form>

            <form *ngIf="getAvailableApis()[currentIdOfApi]['API_Name']=='Who Is IP Netblocks'"
                [formGroup]="forms['Who Is IP Netblocks']">
                Current API Key: <b>{{ this.getAvailableApis()[currentIdOfApi]['config']['apiKey'] }}</b>
                <br>
                <input type="text" formControlName="newApiKey" placeholder="Enter new API Key">
                <br>
                <button class="config-update-button"
                    (click)="onApiConfigUpdateClick('Who Is IP Netblocks')">Submit</button>
                <br>
            </form>
        </div>
    </ng-container>
</app-content>